<?php
defined('BASEPATH') OR exit('No direct script access allowed');

  class AdminModel extends CI_Model{

    public function get_videos_by_cassette($id){
      $this->db->select('idvideo');
      $this->db->from('video');
      $this->db->where('cassette',$id);
      return $this->db->get()->result_array();
    }

    public function get_events_by_video($id){
      $this->db->select('*');
      $this->db->from('filtro');
      $this->db->where('video',$id);
      return $this->db->get()->result_array();
    }

    //get relation by id
    public function get_formato_by_id($id){
        $this->db->select('nombre');
        $this->db->from('formato');
        $this->db->where('idformato',$id);
        return $this->db->get()->result_array();
    }

    public function get_cassette_by_id($id){
        $this->db->select('clave');
        $this->db->from('cassette');
        $this->db->where('idcassette',$id);
        return $this->db->get()->result_array();
    }

    public function get_video_by_id($id){
        $this->db->select('contenido');
        $this->db->from('video');
        $this->db->where('idvideo',$id);
        return $this->db->get()->result_array();
    }

    public function get_rol_by_id($id){
        $this->db->select('nombre');
        $this->db->from('rol');
        $this->db->where('idrol',$id);
        return $this->db->get()->result_array();
    }
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Usuarios
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------

    public function getUsuarios(){
      $this->db->select('*');
      $this->db->from('usuario');
      $query = $this->db->get()->result_array();
      return $query;
    }

    public function crearUsuario($data){
      $this->db->insert('usuario',$data);
      return $this->db->insert_id();
    }

    public function deshabilitarUsuario($id){
      $data = array('estado' => 0  );
      $this->db->where('idusr', $id);
      $this->db->update('usuario', $data);



    }

    public function habilitarUsuario($id){
      $data = array('estado' => 1  );
      $this->db->where('idusr', $id);
      $this->db->update('usuario', $data);



    }

    public function getRoles(){
      $this->db->select('*');
      $this->db->from('rol');
      $query = $this->db->get()->result_array();
      return $query;
    }


    public function usuarioExiste($data){
      $this->db->select('count(*) as c');
      $this->db->from('usuario');
      $this->db->where('username',$data);
      $num = $this->db->get()->result_array();
      return $num;
    }

    public function getUsuario($id){
      $this->db->select('*');
      $this->db->from('usuario');
      $this->db->where('idusr',$id);
      $num = $this->db->get()->result_array();
      return $num;
    }

    public function editarUsuario($id,$data){
      $this->db->where('idusr', $id);
      $this->db->update('usuario', $data);
    }

    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Fin usuarios
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Formatos
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    public function getFormatos(){
      $this->db->select('*');
      $this->db->from('formato');
      $query = $this->db->get()->result_array();
      return $query;
    }

    public function crearFormato($data){
      $this->db->insert('formato',$data);
      return $this->db->insert_id();
    }

    public function deshabilitarFormato($id){
      $data = array('estado' => 0  );
      $this->db->where('idformato', $id);
      $this->db->update('formato', $data);
    }

    public function habilitarFormato($id){
      $data = array('estado' => 1  );
      $this->db->where('idformato', $id);
      $this->db->update('formato', $data);
    }

    public function formatoExiste($data){
      $this->db->select('count(*) as c');
      $this->db->from('formato');
      $this->db->where('nombre',$data);
      $num = $this->db->get()->result_array();
      return $num;
    }

    public function editarFormato($id,$data){
      $this->db->where('idformato', $id);
      $this->db->update('formato', $data);
    }

    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Fin Formatos
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Cassettes
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    public function getCassettes(){
      $this->db->select('*');
      $this->db->from('cassette');
      $query = $this->db->get()->result_array();
      return $query;
    }

    public function crearCassette($data){
      $this->db->insert('cassette',$data);
      return $this->db->insert_id();
    }

    public function deshabilitarCassette($id){
      $data = array('estado' => 0  );
      $this->db->where('idcassette', $id);
      $this->db->update('cassette', $data);
    }

    public function habilitarCassette($id){
      $data = array('estado' => 1  );
      $this->db->where('idcassette', $id);
      $this->db->update('cassette', $data);
    }

    public function cassetteExiste($data){
      $this->db->select('count(*) as c');
      $this->db->from('cassette');
      $this->db->where('clave',$data);
      $num = $this->db->get()->result_array();
      return $num;
    }

    public function editarCassette($id,$data){
      $this->db->where('idcassette', $id);
      $this->db->update('cassette', $data);
    }

    public function getCassette($id){
      $this->db->select('*');
      $this->db->from('cassette');
      $this->db->where('idcassette',$id);
      $num = $this->db->get()->result_array();
      return $num;
    }

    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Fin Cassettes
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Videos
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    public function getVideos(){
      $this->db->select('*');
      $this->db->from('video');
      $query = $this->db->get()->result_array();
      return $query;
    }

    public function crearVideo($data){
      $this->db->insert('video',$data);
      return $this->db->insert_id();
    }

    public function deshabilitarVideo($id){
      $data = array('estado' => 0  );
      $this->db->where('idvideo', $id);
      $this->db->update('video', $data);
    }

    public function habilitarVideo($id){
      $data = array('estado' => 1  );
      $this->db->where('idvideo', $id);
      $this->db->update('video', $data);
    }

    public function videoExiste($data){
      $this->db->select('count(*) as c');
      $this->db->from('video');
      $this->db->where('contenido',$data);
      $num = $this->db->get()->result_array();
      return $num;
    }

    public function editarVideo($id,$data){
      $this->db->where('idvideo', $id);
      $this->db->update('video', $data);
    }

    public function getVideo($id){
      $this->db->select('*');
      $this->db->from('video');
      $this->db->where('idvideo',$id);
      $num = $this->db->get()->result_array();
      return $num;
    }

    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Fin Videos
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Eventos
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    public function getFiltros(){
      $this->db->select('*');
      $this->db->from('filtro');
      $query = $this->db->get()->result_array();
      return $query;
    }

    public function crearFiltro($data){
      $this->db->insert('filtro',$data);
      return $this->db->insert_id();
    }

    public function deshabilitarFiltro($id){
      $data = array('estado' => 0  );
      $this->db->where('idfiltro', $id);
      $this->db->update('filtro', $data);
    }

    public function habilitarFiltro($id){
      $data = array('estado' => 1  );
      $this->db->where('idfiltro', $id);
      $this->db->update('filtro', $data);
    }

    public function editarFiltro($id,$data){
      $this->db->where('idfiltro', $id);
      $this->db->update('filtro', $data);
    }

    public function getFiltro($id){
      $this->db->select('*');
      $this->db->from('filtro');
      $this->db->where('idfiltro',$id);
      $num = $this->db->get()->result_array();
      return $num;
    }

    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------
    //Fin Eventos









  }

?>
